.\"/* 
.\" * All rights reserved
.\" * Copyright (c) 2015-2018 SUSE LINUX GmbH, Nuernberg, Germany.
.\" * Authors: Howard Guo
.\" *
.\" * This program is free software; you can redistribute it and/or
.\" * modify it under the terms of the GNU General Public License
.\" * as published by the Free Software Foundation; either version 2
.\" * of the License, or (at your option) any later version.
.\" *
.\" * This program is distributed in the hope that it will be useful,
.\" * but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" * GNU General Public License for more details.
.\" */
.\" 
.TH sapconf 8 "August 2018" "util-linux" "System Administration"
.SH NAME
sapconf \- Kernel and system configuration for SAP products

.SH DESCRIPTION
sapconf and its profile "sapconf" work on top of the tune daemon (\fBtuned(8)\fP).
.PP
The profiles are stored in subdirectories below \fI/usr/lib/tuned\fP. If you need to customize the profiles, you can copy them to \fI/etc/tuned\fP and modify them as you need. If only copying the \fItuned.conf\fP file, please do not forget to adjust the script path in the \fB[script]\fP section to \fI/usr/lib/tuned/<profile>/script.sh\fP. Or copy the script.sh as well.
.PP
When loading profiles the files in \fI/etc/tuned\fP takes precedence. In such case you will not lose your customized profiles between tuned or sapconf updates. But be in mind, to get the new behaviour the package update is carrying along, remove the profile copy from \fI/etc/tuned\fP or copy the new profile from \fI/usr/lib/tuned/<profile>\fP to \fI/etc/tuned/<profile>\fP or compare the files in \fI/etc/tuned/<profile>\fP with the files in \fI/usr/lib/tuned/<profile>\fP manually and adjust the content, if needed.
.PP
Beside the customization in \fI/etc/tuned\fP the main customization can be done in the central configuration file \fI/etc/sysconfig/sapconf\fP of sapconf.
.br
All parameters to be set by sapconf are read from this file. 
.br
Be in mind: Higher or lower system values set by the system, the SAP installer or by the administrator using sysctl command or sysctl configuration files will be overwritten by sapconf, if they are part of the sapconf sysconfig file.
.PP
The process is splitted in 2 scripts. The \fIcommon.sh\fP is inherited by the sapconf profile and \fIsapconf/script.sh\fP will do the whole tuning for the selected sapconf profile.
.PP
Every tuning action is logged to \fI/var/log/sapconf.log\fP

.SH ACTIVATION
To activate the sapconf tuning profile, run as root:
.PP
tuned-adm profile sapconf
.PP
Make sure that the sapconf service is enabled and running.
.br
This is normally done automatically after the sapconf package installation.
.PP
Check
.br
systemctl status sapconf.service
.PP
Enable
.br
systemctl enabled sapconf.service
.PP
Start
.br
systemctl start sapconf.service

.SH PROFILES
At the moment we're providing one pre\-defined profile:
.TP
.BI "sapconf"
Tuning profile for SAP workload. It is the default profile. If the tune daemon does not have any profile active, \fBsapconf.service\fR will activate this sapconf tuning profile during start.
See the man page \fBtuned-profiles-sapconf(7)\fR for details.
.br
To get a better base in the future for mixed HANA and ABAB workloads on one system, sapconf will use the same tuning values for HANA, Sybase/ASE, BOBJ and NetWeaver workloads. That means that the former profiles "sap\-netweaver", "sap\-hana", "sap\-ase" and "sap\-bobj" existing in SLE12 are consolidated in one basic sapconf profile.

.SH "SAP NOTES"
All settings are done according to SAP note number 900929, 941735, 1771258, 1980196, 2578899, 2031375, 2055470, 2131662, 2684254, 2382421 and 2534844
.br
See the comments in the central sapconf configuration file \fI/etc/sysconfig/sapconf\fR or \fBsapconf(5)\fP for details.

.SH "PACKAGE REQUIREMENTS"
The following package requirements exist for the sapconf package:
.TP 4
.BI "sysstat" 
service is started after package installation (see SAP Note 2578899)
.PP
.TP 4
.BI "uuidd.socket"
service is enabled and started after package installation (see SAP Note 2578899)
.PP
This information is additionally commented in the central sapconf configuration file \fI/etc/sysconfig/sapconf\fR.
.PP
Note: These settings are profile independent. They will be applied during the post stage of the sapconf package installation.
.PP
Note: If the package sapconf is removed from the system, the following settings will still remain:
.TP 4
.BI "UserTasksMax setting in /etc/systemd/logind.conf.d/sap.conf"
Please remove the file manually, if it is not needed any longer.
.br
Note: A reboot is needed after the removal of the file to get the change take effect.
.PP
.TP 4
.BI "Maximum number of open file descriptors in /etc/security/limits.conf"
Please remove the entries manually, if they are not needed any longer.
.PP
.TP 4
.BI "A running sysstat service."
Please stop the sysstat service manually, if it is not needed any longer.
.PP
.TP 4
.BI /etc/sysconfig/sapconf
The central configuration file of sapconf is not removed during package removal.
.PP
.TP 4
.BI /etc/tuned/sap\*
Private copies of tuned profiles in /etc/tuned are not removed during package removal.
.PP
.TP 4
.BI /var/log/sapconf.log
The log file of sapconf will not be removed during package removal.
.PP


.SH "FILES"
.PP
\fI/etc/sysconfig/sapconf\fR
.RS 4
central configuration file
.br
Here you can find all parameters, wich are affected by sapconf. The actual setting value, the source SAP Note, a short explanation and where this parameter is set.
.br
If you change parameter values please don't forget to reload sapconf service to get the changes take effect.
.PP
The package installation of sapconf will have regard for changes made to /etc/sysconfig/sapconf. In some cases the old configuration file is preserved as /etc/sysconfig/sapconf.rpmsave and the new sapconf sysconfig file is copied to /etc/sysconfig/sapconf. Please make sure that you merge needed changes from this file to the new /etc/sysconfig/sapconf file before you restart the sapconf service.
.RE
.PP
\fI/usr/lib/tuned/sapconf/tuned.conf\fR
.RS 4
profile special configuration file
.br
A description of the used values can be found at the end of the central configuration file \fI/etc/sysconfig/sapconf\fR
.br
The profiles are stored in subdirectories below \fI/usr/lib/tuned\fP. If you need to customize the profiles, you can copy them to \fI/etc/tuned\fP and modify them as you need. When loading profiles with the same name, the /etc/tuned takes precedence. In such case you will not lose your customized profiles between tuned updates.
.RE
.PP
\fI/var/log/sapconf\.log\fR
.RS 4
log file of sapconf
.RE

.SH SEE\ ALSO
.BR sapconf (5)
.BR tuned (8)
.BR tuned\-adm (8)
.BR tuned\-profiles\-sapconf(7)

.SH AUTHORS
.na
Howard Guo, Angela Briel
.nf
